@page "/post/{Slug}"
@* NO RENDER MODE HERE - Keep the page static and stable *@
@inject IPostRepository PostRepository

@if (_post is not null)
{
    <article>
        <h1>@_post.Title</h1>
        <div class="post-meta">
            <span>By @_post.AuthorDisplayName</span>

            @* The ONLY interactive part of the page *@
            <ReaderBadge Slug="@Slug" />

        </div>
        <div class="content">
            <MarkdownRenderer Content="@_post.Content" />
        </div>
    </article>
}

@code {
    [Parameter] public string Slug { get; set; } = "";
    private PostDetailDto? _post;

    protected override async Task OnParametersSetAsync()
    {
        _post = await PostRepository.GetBySlugAsync(Slug);
    }
}
